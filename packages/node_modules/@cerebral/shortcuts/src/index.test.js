/* eslint-env mocha */
'use strict'

import { Controller, Module } from 'cerebral'
import shortcuts from './'
const jsdom = require('jsdom')
const { JSDOM } = jsdom

const jsdomInstance = new JSDOM(`<!doctype html><html><body></body></html>`)
global.window = jsdomInstance.window
global.document = jsdomInstance.window.document

describe('Shortcuts module', () => {
  it('should trigger signal upon keypress of letter "z"', (done) => {
    const rootModule = Module({
      signals: {
        test: function() {
          done()
        },
      },
      modules: {
        shortcuts: shortcuts({
          z: 'test',
        }),
      },
    })
    Controller(rootModule)
    document.dispatchEvent(
      new window.KeyboardEvent('keyup', { key: 'z', char: 'z', keyCode: 90 })
    )
  })
})
