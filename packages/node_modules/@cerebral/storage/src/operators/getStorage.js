function getStorageFactory(key) {
  function getStorage({ storage, resolve, path }) {
    if (storage.isAsync) {
      return storage
        .get(resolve.value(key))
        .then(value => path.success({ value, key }))
        .catch(path.error)
    }
    return {
      value: storage.get(resolve.value(key)),
    }
  }

  return getStorage
}

export default getStorageFactory
