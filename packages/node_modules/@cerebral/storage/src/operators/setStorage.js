function setStorageFactory(key, value) {
  function setStorage({ storage, resolve, path }) {
    if (storage.isAsync) {
      return storage
        .set(resolve.value(key), resolve.value(value))
        .then(returnValue =>
          path.success({ key: resolve.value(key), value: returnValue })
        )
        .catch(path.error)
    }
    storage.set(resolve.value(key), resolve.value(value))
  }

  return setStorage
}

export default setStorageFactory
