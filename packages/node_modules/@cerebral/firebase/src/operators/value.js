import { createReturnPromise } from '../helpers'
import { convertObjectWithTemplates } from 'cerebral/tags'

function valueFactory(valuePath, options = {}) {
  function value({ firebase, path, resolve }) {
    return createReturnPromise(
      firebase.value(
        resolve.value(valuePath),
        convertObjectWithTemplates(options, resolve)
      ),
      path
    )
  }

  return value
}

export default valueFactory
