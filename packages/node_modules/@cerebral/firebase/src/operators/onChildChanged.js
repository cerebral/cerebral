import { convertObjectWithTemplates } from 'cerebral/tags'

function onChildChangedFactory(path, signal, options = {}) {
  function onChildChanged({ firebase, resolve }) {
    firebase.onChildChanged(
      resolve.value(path),
      resolve.path(signal),
      convertObjectWithTemplates(options, resolve, 'firebase.onChildChanged')
    )
  }

  return onChildChanged
}

export default onChildChangedFactory
