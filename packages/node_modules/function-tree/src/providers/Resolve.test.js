/* eslint-env mocha */
import FunctionTree from '../'
import assert from 'assert'
import { props } from '../tags'

describe('ResolveProvider', () => {
  it('should have "resolve" on context', () => {
    const ft = new FunctionTree()

    ft.run([
      ({ props }) => {
        assert.ok(props)
      },
    ])
  })
  it('should resolve value of tag', () => {
    const ft = new FunctionTree()

    ft.run(
      [
        ({ resolve }) => {
          assert.equal(resolve.value(props`foo`), 'bar')
        },
      ],
      {
        foo: 'bar',
      }
    )
  })
  it('should resolve path of tag', () => {
    const ft = new FunctionTree()

    ft.run(
      [
        ({ resolve }) => {
          assert.equal(resolve.path(props`foo`), 'foo')
        },
      ],
      {
        foo: 'bar',
      }
    )
  })
  it('should identify tags', () => {
    const ft = new FunctionTree()

    ft.run(
      [
        ({ resolve }) => {
          assert.equal(resolve.isTag(props`foo`), true)
        },
      ],
      {
        foo: 'bar',
      }
    )
  })
})
