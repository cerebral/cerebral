export default function Provide(name, provider) {
  let cachedProvider = typeof provider === 'function' ? null : provider

  return function(context) {
    context[name] = cachedProvider = cachedProvider || provider(context)

    if (context.debugger) {
      context.debugger.wrapProvider(name)
    }

    return context
  }
}
